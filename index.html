<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Simulador ‚ÄúReducir volumen‚Äù (Windows) ‚Äî Educativo</title>

  <link rel="icon" type="image/svg+xml" href="./logo.svg" />
  <link rel="stylesheet" href="./style.css" />

  <!-- CSS cr√≠tico (fallback por si style.css no carga) -->
  <style>
    body{margin:0;background:#0b0f16;color:#e8eefc;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}
    .brand__logo{width:44px;height:44px;display:block}
    .js-warning{max-width:1100px;margin:10px auto 0;padding:0 18px}
    .js-warning__box{
      border:1px dashed rgba(255,255,255,.18);
      background:rgba(255,107,107,.06);
      border-radius:14px;
      padding:10px 12px;
      color:rgba(232,238,252,.95);
      font-size:13px;
      line-height:1.35rem;
      display:none;
    }
  </style>
</head>

<body>
  <!-- Mensaje si app.js no est√° cargando -->
  <div class="js-warning">
    <div class="js-warning__box" id="jsNotRunning">
      ‚ö†Ô∏è Parece que <b>app.js</b> o <b>style.css</b> no se est√°n cargando en GitHub Pages (rutas o nombres).
      Revisa que los archivos est√©n en la <b>ra√≠z</b> del repo y se llamen exactamente:
      <b>index.html</b>, <b>style.css</b>, <b>app.js</b>, <b>logo.svg</b>.
    </div>
  </div>

  <header class="topbar">
    <div class="brand">
      <!-- Fallback tama√±o fijo para que NO se haga gigante si falla CSS -->
      <img src="./logo.svg" alt="Logo" class="brand__logo" width="44" height="44" />
      <div class="brand__text">
        <h1>Simulador ‚ÄúReducir volumen‚Äù (Windows)</h1>
        <p>Herramienta educativa para entender c√≥mo se divide el disco antes de instalar Linux.</p>
      </div>
    </div>

    <div class="badge">
      <span class="dot"></span>
      <span>Solo simulaci√≥n ‚Äî NO toca discos reales</span>
    </div>
  </header>

  <main class="container">
    <section class="card">
      <h2>1) Ingresa los valores exactamente como aparecen en Windows</h2>
      <p class="muted">
        Abre <b>Administraci√≥n de discos</b> ‚Üí clic derecho en la partici√≥n de Windows (C:) ‚Üí <b>Reducir volumen‚Ä¶</b>.
        Copia los dos primeros n√∫meros desde Windows y p√©galos aqu√≠ (en <b>MB</b> y <b>sin comas ni puntos</b>).
      </p>

      <div class="grid">
        <div class="field">
          <label for="totalBeforeMb">Tama√±o total antes de la reducci√≥n, en MB</label>
          <input id="totalBeforeMb" inputmode="numeric" autocomplete="off" placeholder="(vac√≠o)" />
          <div class="hint">Este valor sale de: ‚ÄúTama√±o total antes de la reducci√≥n, en MB‚Äù.</div>
        </div>

        <div class="field">
          <label for="shrinkAvailableMb">Espacio disponible para la reducci√≥n, en MB</label>
          <input id="shrinkAvailableMb" inputmode="numeric" autocomplete="off" placeholder="(vac√≠o)" />
          <div class="hint">
            Al escribir este valor, se copiar√° autom√°ticamente en ‚ÄúTama√±o de espacio que desea reducir‚Ä¶‚Äù, igual que Windows.
          </div>
        </div>

        <div class="field">
          <label for="shrinkDesiredMb">
            Tama√±o de espacio que desea reducir, en MB
            <span class="tag">calculado autom√°ticamente</span>
          </label>

          <div class="inline">
            <input id="shrinkDesiredMb" inputmode="numeric" autocomplete="off" placeholder="(se llenar√° solo)" />
            <button class="btn" id="copyShrinkBtn" type="button" aria-label="Copiar tama√±o a reducir">
              Copiar
            </button>
          </div>

          <div class="hint">
            Puedes <b>disminuir</b> este valor (con el campo o con el divisor). No se permite exceder el m√°ximo calculado por Windows.
          </div>
        </div>

        <div class="field">
          <label for="totalAfterMb">
            Tama√±o total despu√©s de la reducci√≥n, en MB
            <span class="tag">calculado autom√°ticamente</span>
          </label>
          <input id="totalAfterMb" readonly placeholder="(se calcular√°)" />
          <div class="hint">
            Windows lo calcula como: <b>total antes</b> ‚àí <b>tama√±o a reducir</b>.
          </div>
        </div>
      </div>

      <div class="msg" id="statusMsg" role="status" aria-live="polite">
        Ingresa los dos primeros valores para iniciar la simulaci√≥n.
      </div>
    </section>

    <section class="card">
      <h2>2) Visualizaci√≥n del disco (Windows | Linux)</h2>
      <p class="muted">
        Izquierda: <b>Windows despu√©s</b>. Derecha: <b>espacio vac√≠o para Linux</b>.
        El divisor es <b>arrastrable</b> y mantiene proporci√≥n real.
      </p>

      <div class="diskWrap">
        <div class="labelsRow">
          <div class="labelBox">
            <div class="labelTitle">Windows (despu√©s)</div>
            <div class="labelValue" id="labelWindowsAfter">‚Äî</div>
          </div>
          <div class="labelBox">
            <div class="labelTitle">Linux (espacio vac√≠o)</div>
            <div class="labelValue" id="labelLinuxSpace">‚Äî</div>
          </div>
        </div>

        <div class="diskBar" id="diskBar" aria-label="Barra de disco con divisor">
          <div class="seg seg--win" id="segWin"></div>
          <div class="seg seg--linux" id="segLinux"></div>

          <div class="dividerHandle" id="dividerHandle" role="slider"
               aria-valuemin="0" aria-valuemax="0" aria-valuenow="0"
               aria-label="Divisor de partici√≥n" tabindex="0">
            <div class="handleGrip" aria-hidden="true"></div>
          </div>
        </div>

        <div class="mini">
          <div class="mini__row">
            <span class="mini__k">Tip:</span>
            <span class="mini__v">Arrastra el divisor o escribe el valor de ‚ÄúTama√±o a reducir‚Äù.</span>
          </div>
          <div class="mini__row">
            <span class="mini__k">Regla clave:</span>
            <span class="mini__v">Nunca podr√°s superar el ‚ÄúEspacio disponible para la reducci√≥n‚Äù.</span>
          </div>
        </div>
      </div>
    </section>

    <section class="card">
      <h2>3) Explicaci√≥n r√°pida</h2>
      <div class="edu">
        <div class="edu__item">
          <div class="edu__icon">‚õî</div>
          <div>
            <b>¬øPor qu√© Windows limita el m√°ximo?</b><br />
            Hay archivos ‚Äúdif√≠ciles de mover‚Äù (paginaci√≥n, hibernaci√≥n, restauraci√≥n). Windows calcula un m√°ximo ‚Äúseguro‚Äù. Si alguno de estos est√° ubicado cerca del ‚Äúfinal‚Äù de la partici√≥n, Windows no permite reducir m√°s all√° de ese punto, pero si usted necesita m√°s espacio puede hacerlo con una herramienta externa como
			<a href="https://www.diskpart.com/es/articles/reducir-volumen-con-archivos-inamovibles-7400-tc.html" 
		    target="_blank" 
		    rel="noopener"
		    class="edu-link">
		    AOMEI Partition Assistant
		    </a>.
          </div>
        </div>

        <div class="edu__item">
          <div class="edu__icon">üìè</div>
          <div>
            <b>¬øQu√© significa ‚ÄúTama√±o total despu√©s‚Äù?</b><br />
            Es lo que quedar√° para Windows. Lo recortado queda como espacio libre para Linux u otro Sistema Operativo, o alguna partici√≥n que desees crear para tener all√≠ algo.
          </div>
        </div>

        <div class="edu__item">
          <div class="edu__icon">‚ö†Ô∏è</div>
          <div>
            <b>Importante:</b> Esta p√°gina NO hace cambios reales en tu disco. Solo simula n√∫meros y proporci√≥n. La hice porque lo m√°s rapido es usar la herramienta de Windows mismo para "Reducir" espacio en Disco, y los de Microsoft aunque tienen la capacidad de hacerlo nunca hicieron una herramienta visual para mostrar el espacio a dejar para otro Sistema Operativo.
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="footer__cta">
      <div class="footer__title">¬øTe sirvi√≥? Haz fork, traduce, mejora el simulador üëá</div>
      <a class="footer__link" href="https://github.com/wachin/reducir-disco" target="_blank" rel="noopener">
        https://github.com/wachin/reducir-disco
      </a>
    </div>

    <div class="footer__meta">
      <div>Copyright: Washington Indacochea Delgado</div>
      <div>Correo: linuxfrontier@proton.me</div>
      <div>Licencia: GPL 3</div>
      <div>A√±o: 2026</div>
    </div>
  </footer>

  <script src="./app.js"></script>
</body>
</html>
